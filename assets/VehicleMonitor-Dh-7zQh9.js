import{_ as H,r as o,o as A,a as R,c as m,b as _,e,l as f,t as s,k as B,m as I,D as Q,G as W,d as n,f as g,F as $,g as F,w as r,H as X,h as S,I as Y,v as Z,J as ee,K as te,E as L}from"./index-Yu6Nrlez.js";import{i as se}from"./index-Dn_kwerC.js";const ae="/video-management-system/video/traffic.mp4",oe={class:"video-player-container"},ne={class:"video-overlay"},le={class:"overlay-header"},ie={class:"timestamp"},ce={class:"overlay-footer"},re={class:"camera-info"},de={class:"camera-name"},ue={class:"camera-id"},me={__name:"VideoPlayer",props:{stream:{type:String,required:!0},cameraInfo:{type:Object,default:()=>({})}},setup(D){const d=o(null),h=o(""),u=o(!0);let p;const y=()=>{const v=new Date;h.value=v.toLocaleTimeString("zh-CN",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})};return A(()=>{y(),p=setInterval(y,1e3)}),R(()=>{p&&clearInterval(p)}),(v,l)=>{var w,b;return _(),m("div",oe,[e("video",{ref_key:"videoRef",ref:d,class:"video-player",autoplay:"",muted:"",loop:""},l[0]||(l[0]=[e("source",{src:ae,type:"video/mp4"},null,-1),f(" 您的浏览器不支持视频播放。 ")]),512),e("div",ne,[e("div",le,[l[1]||(l[1]=e("span",{class:"real-time-tag"},"实时监控",-1)),e("span",ie,s(h.value),1)]),e("div",ce,[e("div",re,[e("span",de,s((w=D.cameraInfo)==null?void 0:w.name),1),e("span",ue,"ID: "+s((b=D.cameraInfo)==null?void 0:b.id),1)]),e("div",{class:B(["status-tag",{online:u.value}])},s(u.value?"在线":"离线"),3)])])])}}},_e=H(me,[["__scopeId","data-v-032440aa"]]),pe={class:"vehicle-monitor"},ve={class:"monitor-layout"},fe={class:"camera-list"},he={class:"list-header"},ye={class:"list-content"},ge=["onClick"],we={class:"camera-info"},be={class:"camera-text"},Ce={class:"name"},Se={class:"location"},De={class:"monitor-main"},xe={class:"video-header"},ke={class:"camera-title"},Le={class:"title"},Ne={class:"subtitle"},Te={class:"control-buttons"},Ve={class:"video-wrapper"},ze={class:"info-panel"},Ee={class:"panel-section"},Ie={key:0,class:"vehicle-info"},$e={class:"plate-info"},Fe={class:"plate-number"},He={class:"info-table"},Ae={class:"info-row"},Re={class:"value"},Be={class:"info-row"},Me={class:"value"},Oe={class:"info-row"},Ue={class:"value"},qe={class:"info-row"},Ke={class:"value time"},Pe={class:"panel-section"},je={class:"stat-grid"},Ge={class:"stat-item"},Je={class:"number"},Qe={class:"stat-item"},We={class:"number"},Xe={class:"stat-item warning"},Ye={class:"number"},Ze={class:"panel-section"},et={class:"record-list"},tt={class:"record-info"},st={class:"record-plate"},at={class:"record-time"},ot={__name:"VehicleMonitor",setup(D){const d=o(""),h=o(""),u=o("camera-1"),p=o(null),y=o([{id:"camera-1",name:"正门入口",location:"校园正门",status:"online"},{id:"camera-2",name:"后门入口",location:"校园后门",status:"online"},{id:"camera-3",name:"地下车库",location:"A区地下室",status:"offline"},{id:"camera-4",name:"访客停车场",location:"西区停车场",status:"online"},{id:"camera-5",name:"教学楼",location:"B区教学楼",status:"online"},{id:"camera-6",name:"运动场",location:"C区运动场",status:"online"},{id:"camera-7",name:"图书馆",location:"D区图书馆",status:"offline"},{id:"camera-8",name:"停车场",location:"E区停车场",status:"online"}]),v=o({todayCount:286,currentCount:156,warningCount:3}),l=o({plateNumber:"鲁HS2R45",status:"正常",time:new Date().toLocaleString(),type:"小型轿车",color:"黑色",department:"教务处"}),w=o([{plateNumber:"鲁HS2R45",time:new Date(Date.now()-3e5).toLocaleTimeString()},{plateNumber:"鲁H32821",time:new Date(Date.now()-24e4).toLocaleTimeString()},{plateNumber:"鲁H98789",time:new Date(Date.now()-18e4).toLocaleTimeString()},{plateNumber:"鲁H45638",time:new Date(Date.now()-12e4).toLocaleTimeString()},{plateNumber:"鲁H87654",time:new Date(Date.now()-6e4).toLocaleTimeString()},{plateNumber:"鲁H13579",time:new Date().toLocaleTimeString()}]);o([{type:"car",confidence:.81,position:{x:30,y:40,width:40,height:30}},{type:"person",confidence:.57,position:{x:10,y:60,width:10,height:20}}]);const b=I(()=>{let a=y.value;return d.value&&(a=a.filter(t=>t.name.includes(d.value)||t.location.includes(d.value))),h.value&&(a=a.filter(t=>t.status===h.value)),a}),x=I(()=>y.value.find(a=>a.id===u.value)),M=a=>{if(a.status==="offline"){L.warning("该监控点当前离线");return}u.value=a.id},O=()=>{L.success("已抓拍并保存")},U=()=>{L.warning("已发起报警")},q=()=>{p.value&&(document.fullscreenElement?document.exitFullscreen():p.value.requestFullscreen())};o("1"),o("all");const K=o("today");let c=null;o([{name:"小型轿车",count:156,percentage:65,color:"#409EFF"},{name:"SUV",count:45,percentage:20,color:"#67C23A"},{name:"商务车",count:28,percentage:12,color:"#E6A23C"},{name:"其他",count:8,percentage:3,color:"#909399"}]);const N=o(null),P=()=>{if(!N.value)return;c=se(N.value);const a={grid:{top:"10%",left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:["08:00","10:00","12:00","14:00","16:00","18:00","20:00"],axisLine:{lineStyle:{color:"#909399"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#909399"}}},series:[{data:[30,45,78,62,88,95,42],type:"line",smooth:!0,areaStyle:{opacity:.3},itemStyle:{color:"#409EFF"}}]};c.setOption(a)};Q(K,a=>{j(a)});const j=a=>{const t={today:[30,45,78,62,88,95,42],week:[220,182,191,234,290,330,310],month:[820,932,901,934,1290,1330,1320]};c.setOption({series:[{data:t[a]}]})};return A(()=>{W(()=>{P()}),window.addEventListener("resize",()=>{c==null||c.resize()})}),R(()=>{c&&c.dispose(),window.removeEventListener("resize",()=>{c==null||c.resize()})}),(a,t)=>{var V,z;const G=g("el-input"),C=g("el-icon"),T=g("el-tag"),k=g("el-button"),J=g("el-button-group");return _(),m("div",pe,[e("div",ve,[e("div",fe,[e("div",he,[n(G,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=i=>d.value=i),placeholder:"搜索监控点","prefix-icon":"Search",clearable:"",size:"small"},null,8,["modelValue"])]),e("div",ye,[(_(!0),m($,null,F(b.value,i=>(_(),m("div",{key:i.id,class:B(["camera-item",{active:u.value===i.id}]),onClick:E=>M(i)},[e("div",we,[n(C,null,{default:r(()=>[n(S(Y))]),_:1}),e("div",be,[e("span",Ce,s(i.name),1),e("span",Se,s(i.location),1)])]),n(T,{size:"small",type:i.status==="online"?"success":"danger"},{default:r(()=>[f(s(i.status==="online"?"在线":"离线"),1)]),_:2},1032,["type"])],10,ge))),128))])]),e("div",De,[e("div",xe,[e("div",ke,[e("span",Le,s((V=x.value)==null?void 0:V.name),1),e("span",Ne,s((z=x.value)==null?void 0:z.location),1)]),e("div",Te,[n(J,null,{default:r(()=>[n(k,{type:"primary",size:"small",onClick:O},{default:r(()=>[n(C,null,{default:r(()=>[n(S(Z))]),_:1}),t[1]||(t[1]=f("抓拍 "))]),_:1}),n(k,{type:"warning",size:"small",onClick:U},{default:r(()=>[n(C,null,{default:r(()=>[n(S(ee))]),_:1}),t[2]||(t[2]=f("报警 "))]),_:1}),n(k,{size:"small",onClick:q},{default:r(()=>[n(C,null,{default:r(()=>[n(S(te))]),_:1}),t[3]||(t[3]=f("全屏 "))]),_:1})]),_:1})])]),e("div",Ve,[n(_e,{stream:u.value,"camera-info":x.value,class:"video-player"},null,8,["stream","camera-info"])])]),e("div",ze,[e("div",Ee,[t[8]||(t[8]=e("div",{class:"section-title"},"实时识别",-1)),l.value?(_(),m("div",Ie,[e("div",$e,[e("span",Fe,s(l.value.plateNumber),1),n(T,{size:"small",type:l.value.status==="正常"?"success":"warning"},{default:r(()=>[f(s(l.value.status),1)]),_:1},8,["type"])]),e("div",He,[e("div",Ae,[t[4]||(t[4]=e("span",{class:"label"},"类型：",-1)),e("span",Re,s(l.value.type),1)]),e("div",Be,[t[5]||(t[5]=e("span",{class:"label"},"颜色：",-1)),e("span",Me,s(l.value.color),1)]),e("div",Oe,[t[6]||(t[6]=e("span",{class:"label"},"部门：",-1)),e("span",Ue,s(l.value.department),1)]),e("div",qe,[t[7]||(t[7]=e("span",{class:"label"},"时间：",-1)),e("span",Ke,s(l.value.time),1)])])])):X("",!0)]),e("div",Pe,[t[12]||(t[12]=e("div",{class:"section-title"},"今日统计",-1)),e("div",je,[e("div",Ge,[e("span",Je,s(v.value.todayCount),1),t[9]||(t[9]=e("span",{class:"label"},"通行总数",-1))]),e("div",Qe,[e("span",We,s(v.value.currentCount),1),t[10]||(t[10]=e("span",{class:"label"},"当前在场",-1))]),e("div",Xe,[e("span",Ye,s(v.value.warningCount),1),t[11]||(t[11]=e("span",{class:"label"},"异常记录",-1))])])]),e("div",Ze,[t[13]||(t[13]=e("div",{class:"section-title"},"最近记录",-1)),e("div",et,[(_(!0),m($,null,F(w.value,(i,E)=>(_(),m("div",{key:E,class:"record-item"},[e("div",tt,[e("span",st,s(i.plateNumber),1),e("span",at,s(i.time),1)])]))),128))])])])])])}}},it=H(ot,[["__scopeId","data-v-0a208e09"]]);export{it as default};
