import{_ as pe,r as p,m as S,c as g,b as c,e as s,F as x,g as N,d as e,w as t,f as r,k as ce,i as U,j as ve,t as f,l as v,L as H,h as y,M as me,N as be,O as z,P as fe,n as ge,H as _e,Q as he,E as k}from"./index-Yu6Nrlez.js";const we={class:"vehicle-register"},ye={class:"statistics-row"},ke={class:"stat-info"},Ve={class:"stat-value"},Ce={class:"stat-label"},De={class:"main-content"},Ae={class:"card-header"},xe={class:"header-left"},Ne={class:"search-bar"},Pe={class:"header-btns"},Be={class:"pagination-container"},Te={class:"card-header"},Fe={class:"title"},Ee={key:0,class:"header-btns"},Se={class:"color-option"},Ue={__name:"VehicleRegister",setup(He){const P=p([{id:1,plateNumber:"鲁H8A7B6",owner:"张志强",type:"staff",phone:"13800138000",brand:["大众","帕萨特"],color:"白色",validPeriod:[new Date("2024-01-01"),new Date("2024-12-31")],parkingArea:"A1",status:"active",remark:"教师停车证"},{id:4,plateNumber:"鲁H5N9K2",owner:"刘晓华",type:"staff",phone:"13876543210",brand:["奥迪","A6L"],color:"黑色",validPeriod:[new Date("2024-01-01"),new Date("2024-12-31")],parkingArea:"A2",status:"active",remark:"系主任专用车位"},{id:5,plateNumber:"鲁H2M7R4",owner:"赵明",type:"student",phone:"13987654321",brand:["比亚迪","汉"],color:"红色",validPeriod:[new Date("2024-01-01"),new Date("2024-06-30")],parkingArea:"B1",status:"active",remark:"研究生"},{id:6,plateNumber:"鲁H9C3V8",owner:"孙艳",type:"staff",phone:"13765432109",brand:["丰田","卡罗拉"],color:"银色",validPeriod:[new Date("2024-01-01"),new Date("2024-12-31")],parkingArea:"A1",status:"active",remark:"图书馆工作人员"},{id:7,plateNumber:"鲁H7K4X9",owner:"王浩",type:"student",phone:"13654321098",brand:["长安","逸动"],color:"蓝色",validPeriod:[new Date("2024-01-01"),new Date("2024-06-30")],parkingArea:"B2",status:"active",remark:"大四学生"},{id:8,plateNumber:"鲁H3B6P1",owner:"陈静",type:"staff",phone:"13543210987",brand:["本田","CR-V"],color:"深灰色",validPeriod:[new Date("2024-01-01"),new Date("2024-12-31")],parkingArea:"A3",status:"active",remark:"后勤处"},{id:9,plateNumber:"鲁H1F8D5",owner:"杨光",type:"visitor",phone:"13432109876",brand:["现代","索纳塔"],color:"白色",validPeriod:[new Date("2024-03-15"),new Date("2024-03-17")],parkingArea:"C1",status:"active",remark:"学术交流访客"},{id:10,plateNumber:"鲁H6T2L7",owner:"周婷",type:"staff",phone:"13321098765",brand:["马自达","阿特兹"],color:"红色",validPeriod:[new Date("2024-01-01"),new Date("2024-12-31")],parkingArea:"A2",status:"active",remark:"教务处"},{id:11,plateNumber:"鲁H4W9H3",owner:"李强",type:"student",phone:"13210987654",brand:["吉利","帝豪"],color:"银色",validPeriod:[new Date("2024-01-01"),new Date("2024-06-30")],parkingArea:"B1",status:"active",remark:"研究生会主席"},{id:12,plateNumber:"鲁H8E5Y2",owner:"张萍",type:"staff",phone:"13109876543",brand:["大众","速腾"],color:"黑色",validPeriod:[new Date("2024-01-01"),new Date("2024-12-31")],parkingArea:"A1",status:"active",remark:"人事处"}]),L=S(()=>P.value.filter(o=>{const l=!V.value||(o.plateNumber+o.owner).toLowerCase().includes(V.value.toLowerCase()),u=!C.value||o.type===C.value;return l&&u})),R=p([{label:"总登记车辆",value:P.value.length.toString(),icon:"Van",type:"primary"},{label:"本月新增",value:"45",icon:"DataLine",type:"success"},{label:"即将过期",value:"12",icon:"Warning",type:"danger"}]),V=p(""),C=p(""),q=[{value:"大众",label:"大众",children:[{value:"帕萨特",label:"帕萨特"},{value:"迈腾",label:"迈腾"},{value:"速腾",label:"速腾"}]},{value:"丰田",label:"丰田",children:[{value:"凯美瑞",label:"凯美瑞"},{value:"卡罗拉",label:"卡罗拉"},{value:"汉兰达",label:"汉兰达"}]},{value:"本田",label:"本田",children:[{value:"雅阁",label:"雅阁"},{value:"思域",label:"思域"},{value:"CR-V",label:"CR-V"}]}],$=[{value:"白色",label:"白色",hex:"#FFFFFF"},{value:"黑色",label:"黑色",hex:"#000000"},{value:"银色",label:"银色",hex:"#C0C0C0"},{value:"深灰色",label:"深灰色",hex:"#666666"},{value:"红色",label:"红色",hex:"#FF0000"},{value:"蓝色",label:"蓝色",hex:"#0000FF"}],M=[{label:"教职工区域",options:[{value:"A1",label:"A区教师停车场"},{value:"A2",label:"B区教师停车场"},{value:"A3",label:"C区教师停车场"}]},{label:"学生区域",options:[{value:"B1",label:"学生停车场1"},{value:"B2",label:"学生停车场2"}]},{label:"访客区域",options:[{value:"C1",label:"访客停车场"}]}],Q=[{text:"一个月",value:()=>{const o=new Date,l=new Date;return l.setTime(l.getTime()-3600*1e3*24*30),[l,o]}},{text:"三个月",value:()=>{const o=new Date,l=new Date;return l.setTime(l.getTime()-3600*1e3*24*90),[l,o]}},{text:"半年",value:()=>{const o=new Date,l=new Date;return l.setTime(l.getTime()-3600*1e3*24*180),[l,o]}},{text:"一年",value:()=>{const o=new Date,l=new Date;return l.setTime(l.getTime()-3600*1e3*24*365),[l,o]}}],_=p(null),n=p({plateNumber:"",owner:"",type:"",phone:"",brand:[],color:"",validPeriod:"",parkingArea:"",remark:""}),I={plateNumber:[{required:!0,message:"请输入车牌号",trigger:"blur"},{pattern:/^[A-Z0-9]{5}$/,message:"请输入正确的车牌号格式",trigger:"blur"}],owner:[{required:!0,message:"请输入车主姓名",trigger:"blur"}],type:[{required:!0,message:"请选择车辆类型",trigger:"change"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号格式",trigger:"blur"}],brand:[{required:!0,message:"请选择车辆品牌",trigger:"change"}],color:[{required:!0,message:"请选择车辆颜色",trigger:"change"}],validPeriod:[{required:!0,message:"请选择有效期限",trigger:"change"}],parkingArea:[{required:!0,message:"请选择停车区域",trigger:"change"}]},K=async()=>{_.value&&await _.value.validate((o,l)=>{o?(k.success("登记成功"),T()):console.log("error submit!",l)})},T=()=>{_.value&&_.value.resetFields()},W=o=>o.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"?!0:(k.error("只能上传 Excel 文件！"),!1),j=()=>{k.success("模板下载成功")},O=()=>{k.success("数据导出成功")},X=o=>{console.log("编辑车辆",o)},Y=o=>{he.confirm(`确定要删除车牌号为 ${o.plateNumber} 的车辆记录吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{k.success("删除成功")})},Z=p([]),G=o=>{Z.value=o},D=p(1),B=p(10),J=S(()=>P.value.length),ee=o=>{B.value=o,D.value=1},le=o=>{D.value=o},ae=o=>{if(!o||!Array.isArray(o))return"";const l=new Date(o[0]).toLocaleDateString(),u=new Date(o[1]).toLocaleDateString();return`${l} 至 ${u}`};return(o,l)=>{const u=r("el-icon"),h=r("el-input"),i=r("el-option"),A=r("el-select"),m=r("el-button"),te=r("el-upload"),b=r("el-table-column"),F=r("el-tag"),oe=r("el-button-group"),ne=r("el-table"),re=r("el-pagination"),E=r("el-card"),d=r("el-form-item"),se=r("el-cascader"),ue=r("el-date-picker"),de=r("el-option-group"),ie=r("el-form");return c(),g("div",we,[s("div",ye,[(c(!0),g(x,null,N(R.value,a=>(c(),g("div",{key:a.label,class:"stat-card"},[s("div",{class:ce(["stat-icon",a.type])},[e(u,null,{default:t(()=>[(c(),U(ve(a.icon)))]),_:2},1024)],2),s("div",ke,[s("div",Ve,f(a.value),1),s("div",Ce,f(a.label),1)])]))),128))]),s("div",De,[e(E,{class:"vehicle-list-card"},{header:t(()=>[s("div",Ae,[s("div",xe,[s("div",Ne,[e(h,{modelValue:V.value,"onUpdate:modelValue":l[0]||(l[0]=a=>V.value=a),placeholder:"搜索车牌号/车主","prefix-icon":"Search",clearable:""},null,8,["modelValue"]),e(A,{modelValue:C.value,"onUpdate:modelValue":l[1]||(l[1]=a=>C.value=a),placeholder:"车辆类型",clearable:""},{default:t(()=>[e(i,{label:"全部",value:""}),e(i,{label:"教职工车辆",value:"staff"}),e(i,{label:"学生车辆",value:"student"}),e(i,{label:"访客车辆",value:"visitor"})]),_:1},8,["modelValue"])])]),s("div",Pe,[e(m,{type:"success",onClick:j},{default:t(()=>[e(u,null,{default:t(()=>[e(y(z))]),_:1}),l[13]||(l[13]=v("下载模板 "))]),_:1}),e(te,{class:"upload-btn",action:"/api/vehicles/import","show-file-list":!1,"before-upload":W},{default:t(()=>[e(m,{type:"primary"},{default:t(()=>[e(u,null,{default:t(()=>[e(y(fe))]),_:1}),l[14]||(l[14]=v("批量导入 "))]),_:1})]),_:1}),e(m,{type:"primary",onClick:O},{default:t(()=>[e(u,null,{default:t(()=>[e(y(z))]),_:1}),l[15]||(l[15]=v("导出数据 "))]),_:1})])])]),default:t(()=>[e(ne,{data:L.value,style:{width:"100%"},height:"calc(100vh - 280px)",onSelectionChange:G,onRowClick:o.handleRowClick},{default:t(()=>[e(b,{type:"selection",width:"55"}),e(b,{prop:"plateNumber",label:"车牌号",width:"120"}),e(b,{prop:"owner",label:"车主",width:"100"}),e(b,{prop:"type",label:"类型",width:"100"},{default:t(({row:a})=>[e(F,{type:a.type==="staff"?"success":a.type==="student"?"warning":"info"},{default:t(()=>[v(f(a.type==="staff"?"教职工":a.type==="student"?"学生":"访客"),1)]),_:2},1032,["type"])]),_:1}),e(b,{prop:"phone",label:"联系电话",width:"120"}),e(b,{prop:"validPeriod",label:"有效期","min-width":"200"},{default:t(({row:a})=>[v(f(ae(a.validPeriod)),1)]),_:1}),e(b,{prop:"status",label:"状态",width:"100",fixed:"right"},{default:t(({row:a})=>[e(F,{type:a.status==="active"?"success":"danger"},{default:t(()=>[v(f(a.status==="active"?"有效":"过期"),1)]),_:2},1032,["type"])]),_:1}),e(b,{label:"操作",width:"120",fixed:"right"},{default:t(({row:a})=>[e(oe,null,{default:t(()=>[e(m,{type:"primary",link:"",onClick:H(w=>X(a),["stop"])},{default:t(()=>[e(u,null,{default:t(()=>[e(y(me))]),_:1})]),_:2},1032,["onClick"]),e(m,{type:"danger",link:"",onClick:H(w=>Y(a),["stop"])},{default:t(()=>[e(u,null,{default:t(()=>[e(y(be))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","onRowClick"]),s("div",Be,[e(re,{"current-page":D.value,"onUpdate:currentPage":l[2]||(l[2]=a=>D.value=a),"page-size":B.value,"onUpdate:pageSize":l[3]||(l[3]=a=>B.value=a),"page-sizes":[10,20,50,100],total:J.value,layout:"total, sizes, prev, pager, next",onSizeChange:ee,onCurrentChange:le},null,8,["current-page","page-size","total"])])]),_:1}),e(E,{class:"vehicle-detail-card"},{header:t(()=>[s("div",Te,[s("span",Fe,f(o.isEditing?"编辑车辆":"车辆登记"),1),o.isEditing?(c(),g("div",Ee,[e(m,{onClick:o.cancelEdit},{default:t(()=>l[16]||(l[16]=[v("取消编辑")])),_:1},8,["onClick"])])):_e("",!0)])]),default:t(()=>[e(ie,{ref_key:"formRef",ref:_,model:n.value,rules:I,"label-width":"100px",class:"register-form"},{default:t(()=>[e(d,{label:"车牌号",prop:"plateNumber"},{default:t(()=>[e(h,{modelValue:n.value.plateNumber,"onUpdate:modelValue":l[4]||(l[4]=a=>n.value.plateNumber=a),placeholder:"请输入车牌号"},null,8,["modelValue"])]),_:1}),e(d,{label:"车主姓名",prop:"owner"},{default:t(()=>[e(h,{modelValue:n.value.owner,"onUpdate:modelValue":l[5]||(l[5]=a=>n.value.owner=a),placeholder:"请输入车主姓名"},null,8,["modelValue"])]),_:1}),e(d,{label:"车辆类型",prop:"type"},{default:t(()=>[e(A,{modelValue:n.value.type,"onUpdate:modelValue":l[6]||(l[6]=a=>n.value.type=a),placeholder:"请选择车辆类型",style:{width:"100%"}},{default:t(()=>[e(i,{label:"教职工车辆",value:"staff"}),e(i,{label:"学生车辆",value:"student"}),e(i,{label:"访客车辆",value:"visitor"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"联系电话",prop:"phone"},{default:t(()=>[e(h,{modelValue:n.value.phone,"onUpdate:modelValue":l[7]||(l[7]=a=>n.value.phone=a),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),e(d,{label:"车辆品牌",prop:"brand"},{default:t(()=>[e(se,{modelValue:n.value.brand,"onUpdate:modelValue":l[8]||(l[8]=a=>n.value.brand=a),options:q,props:{expandTrigger:"hover"},placeholder:"请选择车辆品牌"},null,8,["modelValue"])]),_:1}),e(d,{label:"车辆颜色",prop:"color"},{default:t(()=>[e(A,{modelValue:n.value.color,"onUpdate:modelValue":l[9]||(l[9]=a=>n.value.color=a),placeholder:"请选择车辆颜色"},{default:t(()=>[(c(),g(x,null,N($,a=>e(i,{key:a.value,label:a.label,value:a.value},{default:t(()=>[s("div",Se,[s("div",{class:"color-block",style:ge({background:a.hex})},null,4),s("span",null,f(a.label),1)])]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"有效期限",prop:"validPeriod"},{default:t(()=>[e(ue,{modelValue:n.value.validPeriod,"onUpdate:modelValue":l[10]||(l[10]=a=>n.value.validPeriod=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",shortcuts:Q,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(d,{label:"停车区域",prop:"parkingArea"},{default:t(()=>[e(A,{modelValue:n.value.parkingArea,"onUpdate:modelValue":l[11]||(l[11]=a=>n.value.parkingArea=a),placeholder:"请选择停车区域"},{default:t(()=>[(c(),g(x,null,N(M,a=>e(de,{key:a.label,label:a.label},{default:t(()=>[(c(!0),g(x,null,N(a.options,w=>(c(),U(i,{key:w.value,label:w.label,value:w.value},null,8,["label","value"]))),128))]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"备注"},{default:t(()=>[e(h,{modelValue:n.value.remark,"onUpdate:modelValue":l[12]||(l[12]=a=>n.value.remark=a),type:"textarea",rows:3,placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[e(m,{type:"primary",onClick:K},{default:t(()=>[v(f(o.isEditing?"保存修改":"提交登记"),1)]),_:1}),e(m,{onClick:T},{default:t(()=>l[17]||(l[17]=[v("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])])}}},Le=pe(Ue,[["__scopeId","data-v-a26749eb"]]);export{Le as default};
