import{_ as se,r as v,o as le,a as ie,m as ce,c as h,b as r,e as s,d as t,F as N,g as V,w as n,f as i,k as I,i as E,j as ue,H as Q,t as l,l as c,h as P,R as de,S as re,U as me,V as pe,E as z}from"./index-Yu6Nrlez.js";const _e={class:"access-monitor"},fe={class:"statistics-row"},ve={class:"stat-info"},he={class:"stat-value"},ge={class:"stat-label"},ye={class:"card-header"},we={class:"header-left"},be={class:"monitor-grid"},De={class:"door-header"},Ce={class:"door-name"},Se={class:"door-content"},Me={class:"door-info"},Oe={class:"door-actions"},ke={class:"card-header"},Le={class:"records-list"},Te={class:"record-header"},Ne={class:"person-name"},Ve={class:"record-details"},Pe={class:"record-info"},ze={class:"record-location"},$e={class:"record-time"},Ae={class:"record-action"},Re={__name:"AccessMonitor",setup(Ue){const C=v(""),S=v(""),$=v(!1),m=v(null),y=v([]),A=()=>{const o=["张","王","李","赵","陈","刘","杨","黄","周","吴","徐","孙","马","朱","胡","郭","何","高","林","郑","谢","罗","梁","宋","唐","许","韩","冯","邓","曹","彭","曾","肖","田","董","袁","潘","于","蒋","蔡"],a=["伟","强","军","磊","洋","勇","建","峰","超","波","辉","刚","健","明","亮","俊","飞","鹏","斌","浩"],u=["宇","浩","航","瑞","晨","辰","宁","琪","文","明","智","嘉","诚","志","诺","轩","杰","雨","泽","鑫"],d=["芳","娟","敏","静","秀","娜","丽","艳","玲","燕","晶","萍","霞","萱","雪","莉","婷","婧","雯","倩","妍","瑶","璐","漫","茜","淑","莹","晴","珊","瑾"],_=()=>{const D=o[Math.floor(Math.random()*o.length)],g=Math.random()<.5,L=Math.random()<.6;return g?L?D+d[Math.floor(Math.random()*d.length)]+d[Math.floor(Math.random()*d.length)]:D+d[Math.floor(Math.random()*d.length)]:L?D+a[Math.floor(Math.random()*a.length)]+u[Math.floor(Math.random()*u.length)]:D+a[Math.floor(Math.random()*a.length)]},w=[{name:"教学楼正门",location:"教学区"},{name:"图书馆入口",location:"教学区"},{name:"实验楼大门",location:"实验区"},{name:"宿舍楼A座",location:"生活区"},{name:"宿舍楼B座",location:"生活区"},{name:"食堂主入口",location:"生活区"},{name:"体育馆入口",location:"运动区"},{name:"游泳馆入口",location:"运动区"},{name:"行政楼入口",location:"办公区"},{name:"艺术楼入口",location:"教学区"}],p=["刷卡通行","人脸识别","密码开门","远程开启"],b=["正常","正常","正常","正常","异常"],f=w[Math.floor(Math.random()*w.length)],O=p[Math.floor(Math.random()*p.length)],k=b[Math.floor(Math.random()*b.length)];return{id:Date.now(),name:_(),doorName:f.name,location:f.location,action:O,time:new Date().toLocaleString(),status:k}};y.value=Array.from({length:20},()=>A());const j=()=>{const o=A();y.value.unshift(o),y.value.length>50&&y.value.pop();const a=M.value.find(u=>u.name===o.doorName);a&&(a.todayPassCount++,o.status==="异常"&&(U.value[2].value=parseInt(U.value[2].value)+1))};let R=null;const H=()=>{const o=()=>Math.floor(Math.random()*3001+2e3),a=()=>{R=setTimeout(()=>{j(),a()},o())};a()};le(()=>{H()}),ie(()=>{R&&clearTimeout(R)});const U=v([{label:"在线门禁",value:"9/10",icon:"Link",type:"success",trend:0},{label:"今日通行",value:"12,879",icon:"DataLine",type:"primary",trend:12},{label:"异常记录",value:"3",icon:"Warning",type:"danger",trend:-5}]),M=v([{id:1,name:"教学楼正门",location:"教学区",status:"open",lastOperation:"刷卡开启",lastOperationTime:new Date(Date.now()-15*6e4).toLocaleString(),deviceStatus:"online",todayPassCount:1256},{id:2,name:"图书馆入口",location:"教学区",status:"closed",lastOperation:"定时关闭",lastOperationTime:new Date(Date.now()-2*60*6e4).toLocaleString(),deviceStatus:"online",todayPassCount:2145},{id:3,name:"实验楼大门",location:"实验区",status:"open",lastOperation:"人脸识别",lastOperationTime:new Date(Date.now()-5*6e4).toLocaleString(),deviceStatus:"online",todayPassCount:986},{id:4,name:"宿舍楼A座",location:"生活区",status:"open",lastOperation:"刷卡开启",lastOperationTime:new Date(Date.now()-8*6e4).toLocaleString(),deviceStatus:"online",todayPassCount:1678},{id:5,name:"宿舍楼B座",location:"生活区",status:"open",lastOperation:"人脸识别",lastOperationTime:new Date(Date.now()-3*6e4).toLocaleString(),deviceStatus:"online",todayPassCount:1523},{id:6,name:"食堂主入口",location:"生活区",status:"open",lastOperation:"正常开启",lastOperationTime:new Date(Date.now()-30*6e4).toLocaleString(),deviceStatus:"online",todayPassCount:3245},{id:7,name:"体育馆入口",location:"运动区",status:"closed",lastOperation:"定时关闭",lastOperationTime:new Date(Date.now()-12*60*6e4).toLocaleString(),deviceStatus:"offline",todayPassCount:456},{id:8,name:"游泳馆入口",location:"运动区",status:"closed",lastOperation:"定时关闭",lastOperationTime:new Date(Date.now()-10*60*6e4).toLocaleString(),deviceStatus:"online",todayPassCount:234},{id:9,name:"行政楼入口",location:"办公区",status:"open",lastOperation:"人脸识别",lastOperationTime:new Date(Date.now()-20*6e4).toLocaleString(),deviceStatus:"online",todayPassCount:567},{id:10,name:"艺术楼入口",location:"教学区",status:"open",lastOperation:"刷卡开启",lastOperationTime:new Date(Date.now()-45*6e4).toLocaleString(),deviceStatus:"online",todayPassCount:789}]),W=ce(()=>M.value.filter(o=>{const a=o.name.toLowerCase().includes(C.value.toLowerCase())||o.location.toLowerCase().includes(C.value.toLowerCase()),u=!S.value||o.status===S.value;return a&&u})),q=v([{time:"2024-03-20 10:30:45",name:"张三",status:"正常"},{time:"2024-03-20 10:28:32",name:"李四",status:"异常"}]),G=v([{content:"系统自动关闭",timestamp:"2024-03-20 22:00:00",type:"primary"},{content:"管理员手动开启",timestamp:"2024-03-20 08:00:00",type:"success"},{content:"设备离线",timestamp:"2024-03-19 23:45:00",type:"danger"}]),B=(o,a)=>{o.status=a==="open"?"open":"closed",o.lastOperation=`${a==="open"?"手动开启":"手动关闭"}`,o.lastOperationTime=new Date().toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),z.success(`${o.name}已${a==="open"?"开启":"关闭"}`)},J=()=>{M.value.forEach(o=>{o.status="open",o.lastOperation="紧急开启",o.lastOperationTime=new Date().toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),z.success("已紧急开启所有门禁")},K=()=>{M.value.forEach(o=>{o.status="closed",o.lastOperation="紧急关闭",o.lastOperationTime=new Date().toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),z.success("已紧急关闭所有门禁")},X=o=>{m.value=o,$.value=!0},Y=()=>{y.value=[];for(let o=0;o<20;o++)y.value.unshift(A());z.success("记录已更新")},Z=o=>{const u=Date.now()-new Date(o).getTime(),d=Math.floor(u/6e4),_=Math.floor(d/60),w=Math.floor(_/24);return w>0?`${w}天前`:_>0?`${_}小时前`:d>0?`${d}分钟前`:"刚刚"};return(o,a)=>{const u=i("el-icon"),d=i("el-input"),_=i("el-option"),w=i("el-select"),p=i("el-button"),b=i("el-button-group"),f=i("el-tag"),O=i("el-card"),k=i("el-col"),D=i("el-row"),g=i("el-descriptions-item"),L=i("el-descriptions"),x=i("el-table-column"),ee=i("el-table"),F=i("el-tab-pane"),te=i("el-timeline-item"),ae=i("el-timeline"),ne=i("el-tabs"),oe=i("el-dialog");return r(),h("div",_e,[s("div",fe,[(r(!0),h(N,null,V(U.value,e=>(r(),h("div",{key:e.label,class:"stat-card"},[s("div",{class:I(["stat-icon",e.type])},[t(u,null,{default:n(()=>[(r(),E(ue(e.icon)))]),_:2},1024)],2),s("div",ve,[s("div",he,l(e.value),1),s("div",ge,l(e.label),1),e.trend?(r(),h("div",{key:0,class:I(["stat-trend",e.trend>0?"up":"down"])},l(Math.abs(e.trend))+"% "+l(e.trend>0?"↑":"↓"),3)):Q("",!0)])]))),128))]),t(D,{gutter:20},{default:n(()=>[t(k,{span:16},{default:n(()=>[t(O,{class:"monitor-card"},{header:n(()=>[s("div",ye,[s("div",we,[t(d,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),placeholder:"搜索门禁","prefix-icon":"Search",clearable:"",class:"search-input"},null,8,["modelValue"]),t(w,{modelValue:S.value,"onUpdate:modelValue":a[1]||(a[1]=e=>S.value=e),placeholder:"状态",clearable:""},{default:n(()=>[t(_,{label:"全部",value:""}),t(_,{label:"开启",value:"open"}),t(_,{label:"关闭",value:"closed"})]),_:1},8,["modelValue"])]),t(b,null,{default:n(()=>[t(p,{type:"primary",onClick:J},{default:n(()=>[t(u,null,{default:n(()=>[t(P(de))]),_:1}),a[4]||(a[4]=c("一键开启 "))]),_:1}),t(p,{type:"danger",onClick:K},{default:n(()=>[t(u,null,{default:n(()=>[t(P(re))]),_:1}),a[5]||(a[5]=c("一键关闭 "))]),_:1})]),_:1})])]),default:n(()=>[s("div",be,[(r(!0),h(N,null,V(W.value,e=>(r(),h("div",{key:e.id,class:"door-card"},[s("div",De,[s("span",Ce,l(e.name),1),t(f,{type:e.status==="open"?"success":"info",size:"small"},{default:n(()=>[c(l(e.status==="open"?"开启":"关闭"),1)]),_:2},1032,["type"])]),s("div",Se,[s("div",Me,[s("p",null,"位置："+l(e.location),1),s("p",null,"最近操作："+l(e.lastOperation),1),s("p",null,"操作时间："+l(Z(e.lastOperationTime)),1),s("p",null,"今日通行："+l(e.todayPassCount)+" 人次",1),s("p",null,[a[6]||(a[6]=c("状态：")),t(f,{size:"small",type:e.deviceStatus==="online"?"success":"danger"},{default:n(()=>[c(l(e.deviceStatus==="online"?"在线":"离线"),1)]),_:2},1032,["type"])])]),s("div",Oe,[t(b,null,{default:n(()=>[t(p,{type:"primary",disabled:e.status==="open",onClick:T=>B(e,"open"),size:"small"},{default:n(()=>a[7]||(a[7]=[c("开启")])),_:2},1032,["disabled","onClick"]),t(p,{type:"warning",disabled:e.status==="closed",onClick:T=>B(e,"close"),size:"small"},{default:n(()=>a[8]||(a[8]=[c("关闭")])),_:2},1032,["disabled","onClick"]),t(p,{type:"info",onClick:T=>X(e),size:"small"},{default:n(()=>a[9]||(a[9]=[c("详情")])),_:2},1032,["onClick"])]),_:2},1024)])])]))),128))])]),_:1})]),_:1}),t(k,{span:8},{default:n(()=>[t(O,{class:"record-card"},{header:n(()=>[s("div",ke,[a[10]||(a[10]=s("span",null,"实时通行记录",-1)),t(b,null,{default:n(()=>[t(p,{icon:P(me),circle:"",onClick:Y},null,8,["icon"]),t(p,{icon:P(pe),circle:"",onClick:a[2]||(a[2]=e=>o.showFilterDialog=!0)},null,8,["icon"])]),_:1})])]),default:n(()=>[s("div",Le,[(r(!0),h(N,null,V(y.value,e=>(r(),h("div",{key:e.id,class:"record-item"},[s("div",Te,[s("span",Ne,l(e.name),1),t(f,{size:"small",type:e.status==="正常"?"success":"danger"},{default:n(()=>[c(l(e.status),1)]),_:2},1032,["type"])]),s("div",Ve,[s("div",Pe,[s("span",null,l(e.doorName),1),s("span",ze,l(e.location),1)]),s("div",$e,[s("span",null,l(e.time),1),s("span",Ae,l(e.action),1)])])]))),128))])]),_:1})]),_:1})]),_:1}),t(oe,{modelValue:$.value,"onUpdate:modelValue":a[3]||(a[3]=e=>$.value=e),title:"门禁详情",width:"600px"},{default:n(()=>[m.value?(r(),E(L,{key:0,column:2,border:""},{default:n(()=>[t(g,{label:"门禁名称"},{default:n(()=>[c(l(m.value.name),1)]),_:1}),t(g,{label:"位置"},{default:n(()=>[c(l(m.value.location),1)]),_:1}),t(g,{label:"设备状态"},{default:n(()=>[t(f,{type:m.value.deviceStatus==="online"?"success":"danger"},{default:n(()=>[c(l(m.value.deviceStatus==="online"?"在线":"离线"),1)]),_:1},8,["type"])]),_:1}),t(g,{label:"当前状态"},{default:n(()=>[t(f,{type:m.value.status==="open"?"success":"info"},{default:n(()=>[c(l(m.value.status==="open"?"开启":"关闭"),1)]),_:1},8,["type"])]),_:1}),t(g,{label:"今日通行"},{default:n(()=>[c(l(m.value.todayPassCount)+" 人次",1)]),_:1}),t(g,{label:"最近操作时间"},{default:n(()=>[c(l(m.value.lastOperationTime),1)]),_:1})]),_:1})):Q("",!0),t(ne,{class:"detail-tabs"},{default:n(()=>[t(F,{label:"通行记录"},{default:n(()=>[t(ee,{data:q.value,style:{width:"100%"},size:"small"},{default:n(()=>[t(x,{prop:"time",label:"时间",width:"150"}),t(x,{prop:"name",label:"姓名"}),t(x,{prop:"status",label:"状态"},{default:n(({row:e})=>[t(f,{type:e.status==="正常"?"success":"danger",size:"small"},{default:n(()=>[c(l(e.status),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])]),_:1}),t(F,{label:"操作记录"},{default:n(()=>[t(ae,null,{default:n(()=>[(r(!0),h(N,null,V(G.value,(e,T)=>(r(),E(te,{key:T,type:e.type,timestamp:e.timestamp},{default:n(()=>[c(l(e.content),1)]),_:2},1032,["type","timestamp"]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Ee=se(Re,[["__scopeId","data-v-da65c8d0"]]);export{Ee as default};
