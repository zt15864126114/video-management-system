import{f as m,g as O,S as Q,c as $,T as V,o as z,i as n,b as t,w as s,r as d,t as p,V as R,W,e as _,k as i,p as X,X as I,Y,Z as j,_ as A,$ as G,a0 as H,a1 as J,a2 as K,m as ee,n as te,a3 as u}from"./vendor-B1sSQAux.js";import{V as le}from"./VideoPlayer-WTQ1RDvL.js";import{_ as ae}from"./main-Cako4ZLr.js";const ne={class:"video-monitor"},se={class:"monitor-layout"},oe={class:"left-panel"},ie={class:"card-header"},re={class:"main-panel"},de={class:"video-container"},ue={class:"toolbar"},ce={class:"toolbar-left"},me={class:"time-display"},_e={class:"current-time"},ve={class:"current-date"},fe={class:"toolbar-right"},pe=["data-layout"],be=["onClick"],ye={class:"camera-info"},Ce={class:"camera-info-left"},ge={class:"camera-name"},he={class:"camera-time"},ke={__name:"VideoMonitor",setup(we){const b=m(""),r=m("4"),v=m(null),C=m(""),x=m("");let g=null;const L=()=>{const l=new Date;C.value=l.toLocaleTimeString("zh-CN",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),x.value=l.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",weekday:"long"})};O(()=>{L(),g=setInterval(L,1e3)}),Q(()=>{g&&clearInterval(g)});const h=m([{id:"1",label:"教学区",children:[{id:"camera-1",label:"一号教学楼大门",stream:"stream-1",status:"online"},{id:"camera-2",label:"二号教学楼大门",stream:"stream-2",status:"online"},{id:"camera-3",label:"教学楼走廊",stream:"stream-3",status:"online"},{id:"camera-4",label:"图书馆门口",stream:"stream-4",status:"online"}]},{id:"2",label:"生活区",children:[{id:"camera-5",label:"一号宿舍楼",stream:"stream-5",status:"online"},{id:"camera-6",label:"二号宿舍楼",stream:"stream-6",status:"offline"},{id:"camera-7",label:"食堂大门",stream:"stream-7",status:"online"},{id:"camera-8",label:"超市门口",stream:"stream-8",status:"online"}]},{id:"3",label:"运动区",children:[{id:"camera-9",label:"操场北",stream:"stream-9",status:"online"},{id:"camera-10",label:"操场南",stream:"stream-10",status:"online"},{id:"camera-11",label:"体育馆",stream:"stream-11",status:"online"},{id:"camera-12",label:"游泳馆",stream:"stream-12",status:"offline"}]}]),S=$(()=>{const l=[];return h.value.forEach(e=>{e.children&&l.push(...e.children)}),l}),E=$(()=>{const l=parseInt(r.value);return S.value.slice(0,l)}),M=$(()=>{if(!b.value)return h.value;const l=b.value.toLowerCase();return h.value.map(e=>{const y=e.children.filter(k=>k.label.toLowerCase().includes(l));return y.length?{...e,children:y}:null}).filter(Boolean)}),B={children:"children",label:"label"},D=l=>{l.children||N(l)},N=l=>{v.value=l,r.value="1"},P=l=>{u.error(`视频加载失败: ${l}`)},c=l=>{if(!v.value){u.warning("请先选择摄像头");return}console.log("PTZ控制:",l),u.success(`正在${l}`)},Z=()=>{if(!v.value){u.warning("请先选择摄像头");return}u.success("已抓拍当前画面")},U=()=>{if(!v.value){u.warning("请先选择摄像头");return}u.success("开始录制视频")};return(l,e)=>{const y=d("el-input"),k=d("el-tree"),q=d("el-card"),f=d("el-icon"),o=d("el-button"),w=d("el-button-group"),F=d("el-tag");return z(),V("div",ne,[n("div",se,[n("div",oe,[t(q,{class:"camera-list"},{header:s(()=>[n("div",ie,[e[10]||(e[10]=n("span",null,"监控点位列表",-1)),t(y,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=a=>b.value=a),placeholder:"搜索监控点","prefix-icon":"Search",clearable:"",size:"small"},null,8,["modelValue"])])]),default:s(()=>[t(k,{data:M.value,props:B,onNodeClick:D,"highlight-current":!0,"expand-on-click-node":!1,"default-expanded-keys":["1","2","3"]},null,8,["data"])]),_:1})]),n("div",re,[n("div",de,[n("div",ue,[n("div",ce,[n("div",me,[n("div",_e,p(C.value),1),n("div",ve,p(x.value),1)]),t(w,null,{default:s(()=>[t(o,{type:r.value==="1"?"primary":"",onClick:e[1]||(e[1]=a=>r.value="1")},{default:s(()=>[t(f,null,{default:s(()=>[t(i(X))]),_:1}),e[11]||(e[11]=_("单屏 "))]),_:1},8,["type"]),t(o,{type:r.value==="4"?"primary":"",onClick:e[2]||(e[2]=a=>r.value="4")},{default:s(()=>[t(f,null,{default:s(()=>[t(i(I))]),_:1}),e[12]||(e[12]=_("四分屏 "))]),_:1},8,["type"]),t(o,{type:r.value==="9"?"primary":"",onClick:e[3]||(e[3]=a=>r.value="9")},{default:s(()=>[t(f,null,{default:s(()=>[t(i(I))]),_:1}),e[13]||(e[13]=_("九分屏 "))]),_:1},8,["type"])]),_:1})]),n("div",fe,[t(w,null,{default:s(()=>[t(o,{icon:i(Y),circle:"",onClick:e[4]||(e[4]=a=>c("up"))},null,8,["icon"]),t(o,{icon:i(j),circle:"",onClick:e[5]||(e[5]=a=>c("down"))},null,8,["icon"]),t(o,{icon:i(A),circle:"",onClick:e[6]||(e[6]=a=>c("left"))},null,8,["icon"]),t(o,{icon:i(G),circle:"",onClick:e[7]||(e[7]=a=>c("right"))},null,8,["icon"])]),_:1}),t(w,null,{default:s(()=>[t(o,{icon:i(H),circle:"",onClick:e[8]||(e[8]=a=>c("zoomIn"))},null,8,["icon"]),t(o,{icon:i(J),circle:"",onClick:e[9]||(e[9]=a=>c("zoomOut"))},null,8,["icon"])]),_:1}),t(o,{type:"primary",plain:"",onClick:Z},{default:s(()=>[t(f,null,{default:s(()=>[t(i(K))]),_:1}),e[14]||(e[14]=_("抓拍 "))]),_:1}),t(o,{type:"danger",plain:"",onClick:U},{default:s(()=>[t(f,null,{default:s(()=>[t(i(ee))]),_:1}),e[15]||(e[15]=_("录制 "))]),_:1})])]),n("div",{class:"video-grid","data-layout":r.value},[(z(!0),V(R,null,W(E.value,a=>{var T;return z(),V("div",{key:a.id,class:te(["video-item",{"is-active":((T=v.value)==null?void 0:T.id)===a.id}]),onClick:$e=>N(a)},[t(le,{stream:a.stream,"camera-info":a,onError:P},null,8,["stream","camera-info"]),n("div",ye,[n("div",Ce,[n("span",ge,p(a.label),1),n("span",he,p(C.value),1)]),t(F,{size:"small",type:a.status==="online"?"success":"danger"},{default:s(()=>[_(p(a.status==="online"?"在线":"离线"),1)]),_:2},1032,["type"])])],10,be)}),128))],8,pe)])])])])}}},Le=ae(ke,[["__scopeId","data-v-ca481bf7"]]);export{Le as default};
