import{_ as O,r as c,o as P,a as Q,m as B,c as _,b,e as s,d as t,w as i,f,F as D,g as M,t as d,k as h,l as y,h as r,p as X,q as N,v as Y,x as Z,y as G,z as H,A as J,B as W,C as ee,E as v}from"./index-Yu6Nrlez.js";const te={class:"video-monitor"},se={class:"left-panel"},le={class:"monitor-list"},ae={class:"list-header"},oe={class:"header-title"},ie={class:"list-content"},ne=["onClick"],re={class:"camera-item-left"},ue={class:"camera-name"},de={class:"right-panel"},me={class:"toolbar"},ce={class:"toolbar-left"},ve={class:"time-display"},pe={class:"current-time"},fe={class:"current-date"},ge={class:"toolbar-right"},_e=["data-layout"],be=["onClick"],ye={class:"image-error"},we={class:"camera-overlay camera-header"},Ce={class:"timestamp"},Ue={class:"camera-overlay camera-footer"},he={class:"camera-details"},ke={class:"monitor-name"},Le={class:"camera-id"},Re={class:"control-panel"},$e={class:"control-buttons"},je={__name:"VideoMonitor",setup(ze){const w=c(""),u=c("4"),a=c(null),k=c(!1),g=c(!1),L=c(""),x=c("");let R=null;const T=()=>{const o=new Date;L.value=o.toLocaleTimeString("zh-CN",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),x.value=o.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",weekday:"long"})};P(()=>{T(),R=setInterval(T,1e3)}),Q(()=>{R&&clearInterval(R)});const $=c([{id:1,label:"楼道检测点",location:"正门入口",status:"online",imageUrl:new URL("/video-management-system/assets/gate-DABundYs.png",import.meta.url).href},{id:2,label:"停车场监测点",location:"教学楼一层大厅",status:"online",imageUrl:new URL("/video-management-system/assets/building-zmgOkoe0.png",import.meta.url).href},{id:3,label:"男生宿舍监控点",location:"操场北侧看台",status:"online",imageUrl:new URL("/video-management-system/assets/image-C2w56X2q.png",import.meta.url).href},{id:4,label:"操场监控点",location:"图书馆入口",status:"online",imageUrl:new URL("/video-management-system/assets/222-xTQFsdKK.png",import.meta.url).href},{id:5,label:"食堂监控点",location:"食堂一楼大厅",status:"online",imageUrl:new URL("../assets/images/monitor/canteen.jpg",import.meta.url).href},{id:6,label:"宿舍楼监控点",location:"宿舍楼大门",status:"offline",imageUrl:new URL("../assets/images/monitor/dormitory.jpg",import.meta.url).href},{id:7,label:"体育馆监控点",location:"体育馆入口",status:"online",imageUrl:new URL("../assets/images/monitor/gym.jpg",import.meta.url).href},{id:8,label:"实验室监控点",location:"实验室一层",status:"online",imageUrl:new URL("../assets/images/monitor/lab.jpg",import.meta.url).href},{id:9,label:"停车场监控点",location:"停车场入口",status:"online",imageUrl:new URL("../assets/images/monitor/parking.jpg",import.meta.url).href},{id:10,label:"运动场监控点",location:"运动场南侧",status:"online",imageUrl:new URL("../assets/images/monitor/sports.jpg",import.meta.url).href},{id:10,label:"教学楼检测点",location:"运动场南侧",status:"online",imageUrl:new URL("../assets/images/monitor/sports.jpg",import.meta.url).href},{id:11,label:"男生宿舍楼监控点",location:"运动场南侧",status:"online",imageUrl:new URL("../assets/images/monitor/sports.jpg",import.meta.url).href},{id:12,label:"女生宿舍楼监控点",location:"运动场南侧",status:"online",imageUrl:new URL("../assets/images/monitor/sports.jpg",import.meta.url).href},{id:13,label:"运动场监控点",location:"运动场南侧",status:"online",imageUrl:new URL("../assets/images/monitor/sports.jpg",import.meta.url).href},{id:14,label:"大门监控点",location:"运动场南侧",status:"online",imageUrl:new URL("../assets/images/monitor/sports.jpg",import.meta.url).href}]),S=B(()=>{if(!w.value)return $.value;const o=w.value.toLowerCase();return $.value.filter(e=>e.label.toLowerCase().includes(o)||e.location.toLowerCase().includes(o))}),q=B(()=>{const o=parseInt(u.value);return u.value==="1"&&a.value?[a.value]:$.value.slice(0,o)}),I=o=>{a.value=o,u.value!=="1"&&(u.value="1")},j=o=>{u.value=o,o!=="1"&&(a.value=null)},E=async()=>{if(!a.value){v.warning("请先选择一个监控点");return}k.value=!0;try{await new Promise(o=>setTimeout(o,1e3)),v.success("抓拍成功")}catch{v.error("抓拍失败")}finally{k.value=!1}},F=()=>{if(!a.value){v.warning("请先选择一个监控点");return}g.value=!g.value,v.success(g.value?"开始录制":"停止录制")},p=o=>{if(!a.value){v.warning("请先选择一个监控点");return}v.success(`云台控制: ${o}`)};return(o,e)=>{const C=f("VideoCamera"),m=f("el-icon"),A=f("el-input"),n=f("el-button"),U=f("el-button-group"),K=f("el-image");return b(),_("div",te,[s("div",se,[s("div",le,[s("div",ae,[s("div",oe,[t(m,null,{default:i(()=>[t(C)]),_:1}),e[10]||(e[10]=s("span",null,"监控点位",-1))]),t(A,{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=l=>w.value=l),placeholder:"搜索监控点","prefix-icon":"Search",clearable:"",size:"small"},null,8,["modelValue"])]),s("div",ie,[(b(!0),_(D,null,M(S.value,l=>{var z;return b(),_("div",{key:l.id,class:h(["camera-item",{active:((z=a.value)==null?void 0:z.id)===l.id}]),onClick:V=>I(l)},[s("div",re,[t(m,null,{default:i(()=>[t(C)]),_:1}),s("span",ue,d(l.label),1)]),s("div",{class:h(["status-tag",l.status])},d(l.status==="online"?"在线":"离线"),3)],10,ne)}),128))])])]),s("div",de,[s("div",me,[s("div",ce,[s("div",ve,[s("div",pe,d(L.value),1),s("div",fe,d(x.value),1)]),t(U,null,{default:i(()=>[t(n,{type:u.value==="1"?"primary":"",onClick:e[1]||(e[1]=l=>j("1"))},{default:i(()=>[t(m,null,{default:i(()=>[t(r(X))]),_:1}),e[11]||(e[11]=y("单屏 "))]),_:1},8,["type"]),t(n,{type:u.value==="4"?"primary":"",onClick:e[2]||(e[2]=l=>j("4"))},{default:i(()=>[t(m,null,{default:i(()=>[t(r(N))]),_:1}),e[12]||(e[12]=y("四分屏 "))]),_:1},8,["type"]),t(n,{type:u.value==="9"?"primary":"",onClick:e[3]||(e[3]=l=>j("9"))},{default:i(()=>[t(m,null,{default:i(()=>[t(r(N))]),_:1}),e[13]||(e[13]=y("九分屏 "))]),_:1},8,["type"])]),_:1})]),s("div",ge,[t(U,null,{default:i(()=>[t(n,{type:"primary",loading:k.value,onClick:E},{default:i(()=>[t(m,null,{default:i(()=>[t(r(Y))]),_:1}),e[14]||(e[14]=y("抓拍 "))]),_:1},8,["loading"]),t(n,{type:g.value?"danger":"primary",onClick:F},{default:i(()=>[t(m,null,{default:i(()=>[t(C)]),_:1}),y(" "+d(g.value?"停止录制":"开始录制"),1)]),_:1},8,["type"])]),_:1})])]),s("div",{class:"video-grid","data-layout":u.value},[(b(!0),_(D,null,M(q.value,(l,z)=>{var V;return b(),_("div",{key:l.id,class:h(["video-item",{"is-active":((V=a.value)==null?void 0:V.id)===l.id}]),onClick:Ve=>I(l)},[t(K,{src:l.imageUrl,fit:"cover","preview-src-list":[l.imageUrl]},{error:i(()=>[s("div",ye,[t(m,null,{default:i(()=>[t(C)]),_:1}),e[15]||(e[15]=s("span",null,"画面未连接",-1))])]),_:2},1032,["src","preview-src-list"]),s("div",we,[e[16]||(e[16]=s("span",{class:"real-time-tag"},"实时监控",-1)),s("span",Ce,d(L.value),1)]),s("div",Ue,[s("div",he,[s("span",ke,d(l.label),1),s("span",Le,"设备编号：Camera_0"+d(l.id),1)]),s("div",{class:h(["camera-status",l.status])},[e[17]||(e[17]=s("span",{class:"status-dot"},null,-1)),s("span",null,d(l.status==="online"?"在线":"离线"),1)],2)])],10,be)}),128))],8,_e),s("div",Re,[e[18]||(e[18]=s("div",{class:"panel-title"},"云台控制",-1)),s("div",$e,[t(U,{class:"direction-group"},{default:i(()=>[t(n,{icon:r(Z),circle:"",disabled:!a.value||a.value.status==="offline",onClick:e[4]||(e[4]=l=>p("up"))},null,8,["icon","disabled"]),t(n,{icon:r(G),circle:"",disabled:!a.value||a.value.status==="offline",onClick:e[5]||(e[5]=l=>p("down"))},null,8,["icon","disabled"]),t(n,{icon:r(H),circle:"",disabled:!a.value||a.value.status==="offline",onClick:e[6]||(e[6]=l=>p("left"))},null,8,["icon","disabled"]),t(n,{icon:r(J),circle:"",disabled:!a.value||a.value.status==="offline",onClick:e[7]||(e[7]=l=>p("right"))},null,8,["icon","disabled"])]),_:1}),t(U,{class:"zoom-group"},{default:i(()=>[t(n,{icon:r(W),circle:"",disabled:!a.value||a.value.status==="offline",onClick:e[8]||(e[8]=l=>p("zoomIn"))},null,8,["icon","disabled"]),t(n,{icon:r(ee),circle:"",disabled:!a.value||a.value.status==="offline",onClick:e[9]||(e[9]=l=>p("zoomOut"))},null,8,["icon","disabled"])]),_:1})])])])])}}},Te=O(je,[["__scopeId","data-v-f18cff6b"]]);export{Te as default};
