import{_ as P,r as m,o as Q,a as Y,m as B,c as g,b as y,e as l,d as t,w as n,f,F as D,g as M,t as d,k as h,l as b,h as r,p as Z,q as N,v as G,x as H,y as J,z as K,A as W,B as X,C as ee,E as v}from"./index-DcPop_mE.js";const te={class:"video-monitor"},le={class:"left-panel"},se={class:"monitor-list"},ae={class:"list-header"},oe={class:"header-title"},ne={class:"list-content"},ie=["onClick"],re={class:"camera-item-left"},ue={class:"camera-name"},de={class:"right-panel"},ce={class:"toolbar"},me={class:"toolbar-left"},ve={class:"time-display"},pe={class:"current-time"},fe={class:"current-date"},_e={class:"toolbar-right"},ge=["data-layout"],ye=["onClick"],be={class:"image-error"},Ce={class:"camera-overlay camera-header"},we={class:"timestamp"},Ue={class:"camera-overlay camera-footer"},he={class:"camera-details"},ke={class:"monitor-name"},Le={class:"camera-id"},Re={class:"control-panel"},$e={class:"control-buttons"},ze={__name:"VideoMonitor",setup(Ve){const C=m(""),u=m("4"),a=m(null),k=m(!1),_=m(!1),L=m(""),x=m("");let R=null;const I=()=>{const o=new Date;L.value=o.toLocaleTimeString("zh-CN",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),x.value=o.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",weekday:"long"})};Q(()=>{I(),R=setInterval(I,1e3)}),Y(()=>{R&&clearInterval(R)});const $=m([{id:1,label:"校门监控点",location:"正门入口",status:"online",imageUrl:new URL("/video-management-system/assets/gate-DABundYs.png",import.meta.url).href},{id:2,label:"教学楼监控点",location:"教学楼一层大厅",status:"online",imageUrl:new URL("/video-management-system/assets/building-zmgOkoe0.png",import.meta.url).href},{id:3,label:"操场监控点",location:"操场北侧看台",status:"online",imageUrl:new URL("../assets/images/monitor/playground.jpg",import.meta.url).href},{id:4,label:"图书馆监控点",location:"图书馆入口",status:"online",imageUrl:new URL("../assets/images/monitor/library.jpg",import.meta.url).href},{id:5,label:"食堂监控点",location:"食堂一楼大厅",status:"online",imageUrl:new URL("../assets/images/monitor/canteen.jpg",import.meta.url).href},{id:6,label:"宿舍楼监控点",location:"宿舍楼大门",status:"offline",imageUrl:new URL("../assets/images/monitor/dormitory.jpg",import.meta.url).href},{id:7,label:"体育馆监控点",location:"体育馆入口",status:"online",imageUrl:new URL("../assets/images/monitor/gym.jpg",import.meta.url).href},{id:8,label:"实验室监控点",location:"实验室一层",status:"online",imageUrl:new URL("../assets/images/monitor/lab.jpg",import.meta.url).href},{id:9,label:"停车场监控点",location:"停车场入口",status:"online",imageUrl:new URL("../assets/images/monitor/parking.jpg",import.meta.url).href},{id:10,label:"运动场监控点",location:"运动场南侧",status:"online",imageUrl:new URL("../assets/images/monitor/sports.jpg",import.meta.url).href}]),S=B(()=>{if(!C.value)return $.value;const o=C.value.toLowerCase();return $.value.filter(e=>e.label.toLowerCase().includes(o)||e.location.toLowerCase().includes(o))}),E=B(()=>{const o=parseInt(u.value);return u.value==="1"&&a.value?[a.value]:$.value.slice(0,o)}),T=o=>{a.value=o,u.value!=="1"&&(u.value="1")},z=o=>{u.value=o,o!=="1"&&(a.value=null)},q=async()=>{if(!a.value){v.warning("请先选择一个监控点");return}k.value=!0;try{await new Promise(o=>setTimeout(o,1e3)),v.success("抓拍成功")}catch{v.error("抓拍失败")}finally{k.value=!1}},A=()=>{if(!a.value){v.warning("请先选择一个监控点");return}_.value=!_.value,v.success(_.value?"开始录制":"停止录制")},p=o=>{if(!a.value){v.warning("请先选择一个监控点");return}v.success(`云台控制: ${o}`)};return(o,e)=>{const w=f("VideoCamera"),c=f("el-icon"),F=f("el-input"),i=f("el-button"),U=f("el-button-group"),O=f("el-image");return y(),g("div",te,[l("div",le,[l("div",se,[l("div",ae,[l("div",oe,[t(c,null,{default:n(()=>[t(w)]),_:1}),e[10]||(e[10]=l("span",null,"监控点位",-1))]),t(F,{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=s=>C.value=s),placeholder:"搜索监控点","prefix-icon":"Search",clearable:"",size:"small"},null,8,["modelValue"])]),l("div",ne,[(y(!0),g(D,null,M(S.value,s=>{var V;return y(),g("div",{key:s.id,class:h(["camera-item",{active:((V=a.value)==null?void 0:V.id)===s.id}]),onClick:j=>T(s)},[l("div",re,[t(c,null,{default:n(()=>[t(w)]),_:1}),l("span",ue,d(s.label),1)]),l("div",{class:h(["status-tag",s.status])},d(s.status==="online"?"在线":"离线"),3)],10,ie)}),128))])])]),l("div",de,[l("div",ce,[l("div",me,[l("div",ve,[l("div",pe,d(L.value),1),l("div",fe,d(x.value),1)]),t(U,null,{default:n(()=>[t(i,{type:u.value==="1"?"primary":"",onClick:e[1]||(e[1]=s=>z("1"))},{default:n(()=>[t(c,null,{default:n(()=>[t(r(Z))]),_:1}),e[11]||(e[11]=b("单屏 "))]),_:1},8,["type"]),t(i,{type:u.value==="4"?"primary":"",onClick:e[2]||(e[2]=s=>z("4"))},{default:n(()=>[t(c,null,{default:n(()=>[t(r(N))]),_:1}),e[12]||(e[12]=b("四分屏 "))]),_:1},8,["type"]),t(i,{type:u.value==="9"?"primary":"",onClick:e[3]||(e[3]=s=>z("9"))},{default:n(()=>[t(c,null,{default:n(()=>[t(r(N))]),_:1}),e[13]||(e[13]=b("九分屏 "))]),_:1},8,["type"])]),_:1})]),l("div",_e,[t(U,null,{default:n(()=>[t(i,{type:"primary",loading:k.value,onClick:q},{default:n(()=>[t(c,null,{default:n(()=>[t(r(G))]),_:1}),e[14]||(e[14]=b("抓拍 "))]),_:1},8,["loading"]),t(i,{type:_.value?"danger":"primary",onClick:A},{default:n(()=>[t(c,null,{default:n(()=>[t(w)]),_:1}),b(" "+d(_.value?"停止录制":"开始录制"),1)]),_:1},8,["type"])]),_:1})])]),l("div",{class:"video-grid","data-layout":u.value},[(y(!0),g(D,null,M(E.value,(s,V)=>{var j;return y(),g("div",{key:s.id,class:h(["video-item",{"is-active":((j=a.value)==null?void 0:j.id)===s.id}]),onClick:je=>T(s)},[t(O,{src:s.imageUrl,fit:"cover","preview-src-list":[s.imageUrl]},{error:n(()=>[l("div",be,[t(c,null,{default:n(()=>[t(w)]),_:1}),e[15]||(e[15]=l("span",null,"画面未连接",-1))])]),_:2},1032,["src","preview-src-list"]),l("div",Ce,[e[16]||(e[16]=l("span",{class:"real-time-tag"},"实时监控",-1)),l("span",we,d(L.value),1)]),l("div",Ue,[l("div",he,[l("span",ke,d(s.label),1),l("span",Le,"设备编号：Camera_0"+d(s.id),1)]),l("div",{class:h(["camera-status",s.status])},[e[17]||(e[17]=l("span",{class:"status-dot"},null,-1)),l("span",null,d(s.status==="online"?"在线":"离线"),1)],2)])],10,ye)}),128))],8,ge),l("div",Re,[e[18]||(e[18]=l("div",{class:"panel-title"},"云台控制",-1)),l("div",$e,[t(U,{class:"direction-group"},{default:n(()=>[t(i,{icon:r(H),circle:"",disabled:!a.value||a.value.status==="offline",onClick:e[4]||(e[4]=s=>p("up"))},null,8,["icon","disabled"]),t(i,{icon:r(J),circle:"",disabled:!a.value||a.value.status==="offline",onClick:e[5]||(e[5]=s=>p("down"))},null,8,["icon","disabled"]),t(i,{icon:r(K),circle:"",disabled:!a.value||a.value.status==="offline",onClick:e[6]||(e[6]=s=>p("left"))},null,8,["icon","disabled"]),t(i,{icon:r(W),circle:"",disabled:!a.value||a.value.status==="offline",onClick:e[7]||(e[7]=s=>p("right"))},null,8,["icon","disabled"])]),_:1}),t(U,{class:"zoom-group"},{default:n(()=>[t(i,{icon:r(X),circle:"",disabled:!a.value||a.value.status==="offline",onClick:e[8]||(e[8]=s=>p("zoomIn"))},null,8,["icon","disabled"]),t(i,{icon:r(ee),circle:"",disabled:!a.value||a.value.status==="offline",onClick:e[9]||(e[9]=s=>p("zoomOut"))},null,8,["icon","disabled"])]),_:1})])])])])}}},Ie=P(ze,[["__scopeId","data-v-f48173a0"]]);export{Ie as default};
